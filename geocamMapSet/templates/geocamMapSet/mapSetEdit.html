<!--
| __BEGIN_LICENSE__
| Copyright (C) 2008-2010 United States Government as represented by
| the Administrator of the National Aeronautics and Space Administration.
| All Rights Reserved.
| __END_LICENSE__
-->
{% extends "base.html" %}

{% block head %}
   {{ block.super }}
    <title>MapMixer - Edit [setName]</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
{% endblock head %}

{% block style %}
    {{ block.super }}

    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas {
          width: 480px;
          height: 480px;
      }
      #mapset_canvas {
          width: 340px;
          height: 480px;
          overflow: auto;
      }
      #mapsetlib_canvas {
          width: 340px;
          height: 480px;
          overflow: auto;
          background: #C8C8C8;
      }

      #mapLayerList {
          margin: 2px;
      }

      #mapSetName {
          font-size: 1.2em;
          font-weight: bold;
          margin-left: 15px;
          margin-top: 10px;
      }

      #save {
          margin-left: 15px;
          margin-right: 15px;
          margin-top: 10px;
      }

      .layerEntry {
          margin: 5px;
          padding-left: 5px;
          padding-right: 3px;
      }

      .layer-entry-left {
          width: 5%
      }

      .layer-entry-mid {
          width: 90%
      }

      .layer-entry-right {
          width: 5%
      }
     
      .libraryEntry {
          width: 290px;
          margin: 5px;
          padding-left: 15px;
          background: #C8C8C8;
          border: 1px solid #CCCCCC;
          color: #1C94C4;
          font-weight: bold;
      }

    </style>

    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}external/css/ui-lightness/jquery-ui-1.8.18.custom.css"></link>

{% endblock style %}

{% block scripts %}
   {{ block.super }}

    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}external/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}external/js/jquery-ui-1.8.18.custom.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}geocamMapSet/js/geocamMapSetLib.js"></script>
{% endblock scripts %}
   
{% block contents %}
    <table>
      <th>Google Map</th>
      <th>Your map set<br>(check or reorder layers)</th>
      <th>Feed Finder<br>(drag and drop the feeds into your map set)</th>
      <tr>
        <td><div id="map_canvas"></div></td>
        <td><div id="mapset_canvas"></div></td>
        <td><div id="mapsetlib_canvas"></div></td>
      </tr>
    </table>    
    <input type="button" value="ToggleEditingMode" onclick="testToggle(myMapSetManager)">
{% endblock contents %}

{% block jsInit %}
      {{ block.super }}

      var myMapSetManager;
      function initialize() {
          spec='/mixer/foo/HurricaneLayers.json';

          var myOptions = {
              center: new google.maps.LatLng(35, -95),
              zoom: 4,
              mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
          
          myMapSetManager = geocamMapSetLib.MapSetManager(spec, map, '#mapset_canvas', '#mapsetlib_canvas');
                    
      }
     
      function testToggle(myMapSetManager) {
          var editable = myMapSetManager.isEditable();
          if (editable) {
              myMapSetManager.disableEditing();
          } else {
              myMapSetManager.enableEditing();
          }
      }

      $(initialize());
{% endblock jsInit %}
